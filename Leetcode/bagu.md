# CPP

# 操作系统

## 简述一下操作系统中的缺页中断

**得分点**
缺页、分类、中断、缺页中断发生时的事件顺序

**参考答案**
**标准回答**

1. 概念
   缺页中断就是要访问的页不在主存，需要操作系统将其调入主存后再进行访问。当图访问已映射在虚拟地址空间中，但是并未被加载在物理内存中的一个分页时，由中央处理器的内存管理单元所发出的中断。通常情况下，用于处理此中断的程序是操作系统的一部分。如果操作系统判断此次访问是有效的，那么操作系统会尝试将相关的分页从硬盘上的虚拟内存文件中调入内存。而如果访问是不被允许的，那么操作系统通常会结束相关的进程。

2. 分类

    1. 软性页缺失：指页缺失发生时，相关的页已经被加载进内存，但是没有向 MMU 注册的情况。操作系统只需要在 MMU 中注册相关页对应的物理地址即可。
    2. 硬性页缺失：硬性页缺失是指相关的页在页缺失发生时未被加载进内存的情况。
    3. 无效页缺失：当程序访问的虚拟地址是不存在于虚拟地址空间内的时候，则发生无效页缺失。

3. 中断

    中断是指计算机在执行程序的过程中，当出现异常情况或特殊请求时，计算机停止现行程序的运行，转向对这些异常情况或特殊请求的处理，处理结束后再返回现行程序的间断处，继续执行原程序。

**加分回答**

缺页中断发生时的事件顺序：

- 硬件陷入内核，在堆栈中保存程序计数器，将当前指令的各种状态信息保存在特殊的 CPU 寄存器中；
- 保存通用寄存器和其他易失的信息，以免被操作系统破坏；
- 当操作系统发现一个缺页中断时，尝试发现需要哪个虚拟页面。通常一个硬件寄存器包含了这一信息，如果没有的话，操作系统必须检索程序计数器，取出这条指令，用软件分析这条指令，看看它在缺页中断时正在做什么；
- 一旦知道了发生缺页中断的虚拟地址，操作系统检查这个地址是否有效，并检查存取与保护是否一致。如果不一致，向进程发出一个信号或杀掉该进程。如果地址有效且没有保护错误发生，系统则检查是否有空闲页框。如果没有空闲页框，执行页面置换算法寻找一个页面来淘汰；
- 如果选择的页框“脏”了，安排该页写回磁盘，并发生一次上下文切换，挂起产生缺页中断的进程，让其他进程运行直至磁盘传输结束。无论如何，该页框被标记为忙，以免因为其他原因而被其他进程占用；
- 一旦页框“干净”后，操作系统查找所需页面在磁盘上的地址，通过磁盘操作将其装入。该页面被装入后，产生缺页中断的进程仍然被挂起，并且如果有其他可运行的用户进程，则选择另一个用户进程运行；
- 当磁盘中断发生时，表明该页已经被装入，页表已经更新可以反映它的位置，页框也被标记为正常状态；
- 恢复发生缺页中断指令以前的状态，程序计数器重新指向这条指令；
- 调度引发缺页中断的进程，操作系统返回调用它的汇编语言程序；
- 该程序恢复寄存器和其他状态信息，返回到用户空间继续执行。

# 计算机网络

## 简述常见的 HTTP 状态码的含义（301，304，401，403）

**2XX 成功**
200 OK，请求成功。成功的含义取决于HTTP方法：

    GET：资源已被提取并在消息正文中传输。
    HEAD：实体标头位于消息正文中。
    POST：描述动作结果的资源在消息体中传输。
    TRACE：消息正文包含服务器收到的请求消息
204 No content，表示请求成功，但响应报文不含实体的主体部分
206 Partial Content，进行范围请求

**3XX 重定向**
301 moved permanently，永久性重定向，表示资源已被分配了新的 URL
302 found，临时性重定向，表示资源临时被分配了新的 URL
303 see other，表示资源存在着另一个 URL，应使用 GET 方法定向获取资源
304 not modified，表示服务器允许访问资源，但因发生请求未满足条件的情况
307 temporary redirect，临时重定向，和302含义相同

**4XX 客户端错误**
400 bad request，请求报文存在语法错误
401 unauthorized，表示发送的请求需要有通过 HTTP 认证的认证信息
403 forbidden，表示对请求资源的访问被服务器拒绝
404 not found，表示在服务器上没有找到请求的资源

**5XX 服务器错误**
500 internal sever error，表示服务器端在执行请求时发生了错误
503 service unavailable，表明服务器暂时处于超负载或正在停机维护，无法处理请求









